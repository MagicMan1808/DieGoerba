<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Feedback System â€“ DieGoerba</title>

    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Script -->
    <script src="js/main.js" defer></script>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>

    <!-- ================= HEADER ================= -->
    <header>
        <h1>Course Feedback System</h1>
        <p>Anonymes Feedback fÃ¼r UniversitÃ¤tsveranstaltungen</p>
    </header>

    <!-- ================= STARTSEITE ================= -->
    <main id="start-screen">
        <h2>Willkommen</h2>
        <p>Bitte wÃ¤hlen Sie, wie Sie fortfahren mÃ¶chten:</p>

        <div class="button-group">
            <button onclick="showStudentView()">Feedback abgeben (Studierende)</button>
            <button onclick="showLecturerView()">Dashboard (Lehrende)</button>
        </div>
    </main>

     <!-- ================= STUDENTENANSICHT ================= -->
    <main id="student-view" class="hidden">
        <h2>Feedback zur heutigen Sitzung</h2>
        <p class="privacy-note"><strong>Hinweis:</strong> Dein Feedback ist vollstÃ¤ndig anonym. Es werden keine persÃ¶nlichen Daten gespeichert.</p>

        <!-- Frage 1 -->
        <div class="question">
            <label>Wie gut konnten Sie dem Inhalt folgen?</label>
            <select id="q1" aria-describedby="q1-error">
                <option value="">Bitte auswÃ¤hlen</option>
                <option value="1">1 â€“ sehr schlecht</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 â€“ sehr gut</option>
            </select>
            <small id="q1-error" class="error-message" role="alert" aria-live="polite"></small>
        </div>

        <!-- Frage 2 -->
        <div class="question">
            <label>Wie verstÃ¤ndlich wurden die Inhalte erklÃ¤rt?</label>
            <select id="q2" aria-describedby="q2-error">
                <option value="">Bitte auswÃ¤hlen</option>
                <option value="1">1 â€“ gar nicht verstÃ¤ndlich</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 â€“ sehr verstÃ¤ndlich</option>
            </select>
            <small id="q2-error" class="error-message" role="alert" aria-live="polite"></small>
        </div>

        <!-- Emoji Feedback -->
        <div class="question" id="emoji-question">
            <label>Wie war Ihre allgemeine Stimmung?</label>
            <div class="emoji-group" id="emoji-group" aria-describedby="emoji-error">
                <span data-value="1" aria-label="Sehr schlecht">ğŸ˜¡</span>
                <span data-value="2" aria-label="Schlecht">ğŸ˜•</span>
                <span data-value="3" aria-label="Neutral">ğŸ˜</span>
                <span data-value="4" aria-label="Gut">ğŸ˜Š</span>
                <span data-value="5" aria-label="Sehr gut">ğŸ˜</span>
            </div>
            <small id="emoji-error" class="error-message" role="alert" aria-live="polite"></small>
        </div>

        <!-- Freitext -->
        <div class="question">
            <label>Optionales Feedback</label>
            <textarea id="comments" placeholder="Was hat Ihnen gefallen oder gefehlt?"></textarea>
        </div>

        <button onclick="submitFeedback()">
            Feedback Ã¼berprÃ¼fen
        </button>
    </main>

    <!-- ================= DANKE-SEITE ================= -->
    <main id="thank-you" class="hidden">
        <div class="loader" id="loader"></div>
        <h2 id="thank-title">Feedback wird verarbeitet â€¦</h2>
        <p id="thank-text">Bitte einen Moment Geduld</p>

        <button onclick="showStart()" class="hidden" id="back-btn">
            ZurÃ¼ck zur Startseite
        </button>
    </main>

    <!-- ================= LEHRENDEN-DASHBOARD ================= -->
    <main id="lecturer-view" class="hidden">
        <h2>Liveâ€‘Dashboard</h2>
        <p>Aktuelle RÃ¼ckmeldungen zur laufenden Session</p>

        <details class="help-section">
            <summary>Kurze ErlÃ¤uterungen zum Dashboard</summary>
            <ul>
                <li><strong>Durchschnittliches VerstÃ¤ndnis:</strong> Mittelwert der Skala 1â€“5 aus Frage 1.</li>
                <li><strong>Stimmung:</strong> Aggregierte Emojiâ€‘RÃ¼ckmeldungen von negativ bis positiv.</li>
                <li><strong>Teilnahmen:</strong> Anzahl der eingegangenen Feedbacks.</li>
                <li><strong>Skalaâ€‘Diagramme:</strong> Verteilung der Bewertungen 1â€“5 (zum VergrÃ¶ÃŸern klicken).</li>
                <li><strong>Emojiâ€‘Diagramm:</strong> HÃ¤ufigkeit der Stimmungsâ€‘Emojis (zum VergrÃ¶ÃŸern klicken).</li>
            </ul>
        </details>

        <div class="dashboard">
            <div class="card">
                <h3>Durchschnittliches VerstÃ¤ndnis</h3>
                <p>4.1 / 5</p>
            </div>
            <div class="card">
                <h3>Stimmung</h3>
                <p>ğŸ˜Š Positiv</p>
            </div>
            <div class="card">
                <h3>Teilnahmen</h3>
                <p>63 Studierende</p>
            </div>
        </div>

        <!-- Skala Diagramm 1 -->
        <div class="card chart-card" onclick="openScaleChart()">
            <h3>Bewertung Skala 1â€“5 (A)</h3>
            <canvas id="scaleChartA" width="200" height="150"></canvas>
            <p class="hint">Zum VergrÃ¶ÃŸern klicken</p>
        </div>

        <!-- Skala Diagramm 2 -->
        <div class="card chart-card" onclick="openScaleChartB()">
            <h3>Bewertung Skala 1â€“5 (B)</h3>
            <canvas id="scaleChartB" width="200" height="150"></canvas>
            <p class="hint">Zum VergrÃ¶ÃŸern klicken</p>
        </div>

        <!-- Emoji Diagramm -->
        <div class="card chart-card" onclick="openEmojiChart()">
            <h3>Emojiâ€‘Feedback</h3>
            <canvas id="feedbackChart" width="200" height="150"></canvas>
            <p class="hint">Zum VergrÃ¶ÃŸern klicken</p>
        </div>

        <h3>Vergangende Vorlesungsbewertungen:</h3>
        <div id="lecture-list" class="lecture-list"></div>

        <button onclick="showStart()">Session beenden</button>
    </main>

        <!-- ================= VORLESUNG-DETAILSEITE ================= -->
    <main id="lecture-detail" class="hidden">
        <h2 id="lecture-title">Vorlesung â€“ Details</h2>
        <p class="privacy-note">Aggregierte, anonyme Feedbacks zur ausgewÃ¤hlten Vorlesung.</p>

        <div class="card chart-card">
            <h3>Bewertung Skala 1â€“5 (A)</h3>
            <canvas id="lectureScaleA" width="200" height="150"></canvas>
        </div>
        <div class="card chart-card">
            <h3>Bewertung Skala 1â€“5 (B)</h3>
            <canvas id="lectureScaleB" width="200" height="150"></canvas>
        </div>
        <div class="card chart-card">
            <h3>Emojiâ€‘Feedback</h3>
            <canvas id="lectureEmoji" width="200" height="150"></canvas>
        </div>

        <div class="button-group">
            <button id="back-to-dashboard" onclick="backToDashboard()">ZurÃ¼ck zum Liveâ€‘Dashboard</button>
        </div>
    </main>

    <div id="chart-overlay" class="hidden">
        <div class="overlay-content">
            <button class="close-btn" onclick="closeChart()">âœ•</button>
            <h2>Antwortverteilung â€“ Details</h2>
            <canvas id="feedbackChartLarge"></canvas>
        </div>
    </div>

    <div id="scale-chart-overlay" class="hidden">
        <div class="overlay-content">
            <button class="close-btn" onclick="closeScaleChart()">âœ•</button>
            <h2>Bewertungen â€“ Skala 1 bis 5</h2>
            <canvas id="scaleChartLarge"></canvas>
        </div>
    </div>

    <div id="scale-chart-overlay-b" class="hidden">
        <div class="overlay-content">
            <button class="close-btn" onclick="closeScaleChartB()">âœ•</button>
            <h2>Bewertungen â€“ Skala 1 bis 5 (B)</h2>
            <canvas id="scaleChartLargeB"></canvas>
        </div>
    </div>


    <!-- ================= CONFIRMATION OVERLAY ================= -->
    <div id="confirm-overlay" class="hidden">
        <div class="overlay-content">
            <button class="close-btn" onclick="closeConfirm()">âœ•</button>
            <h2>Feedback Ã¼berprÃ¼fen und bestÃ¤tigen</h2>
            <div id="confirm-summary"></div>
            <div class="button-group">
                <button id="confirm-edit">Korrigieren</button>
                <button id="confirm-send">EndgÃ¼ltig absenden</button>
            </div>
            <p class="privacy-note">Dein Feedback bleibt anonym. Es werden keine personenbezogenen Daten Ã¼bertragen.</p>
        </div>
    </div>

    <div id="lecture-overlay" class="hidden">
        <div class="overlay-content">
            <button class="close-btn" onclick="closeLectureOverlay()">âœ•</button>
            <h2 id="lecture-title">Vorlesung â€“ Details</h2>
            <canvas id="lectureScaleA"></canvas>
            <canvas id="lectureScaleB"></canvas>
            <canvas id="lectureEmoji"></canvas>
        </div>
    </div>




    <!-- ================= FOOTER ================= -->
    <footer>
        <p>GMCI â€“ Assignment 10 Â· DieGoerba</p>
    </footer>

    <audio id="submit-sound" src="sounds/submit.wav" preload="auto"></audio>

</body>
</html>